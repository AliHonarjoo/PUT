{% extends "base.html" %} {% block content %}
<div class="container">
    <h2>ğŸ“Š Ù¾Ø§Ø³Ø®â€ŒÙ‡Ø§ÛŒ ÙØ±Ù…: {{ form.title }}</h2>

    <div class="card mb-4">
        <div class="card-body">
            <div class="row">
                <div class="col-md-4">
                    <strong>ØªØ¹Ø¯Ø§Ø¯ Ù¾Ø§Ø³Ø®â€ŒÙ‡Ø§:</strong> {{ responses|length }}
                </div>
                <div class="col-md-4">
                    <strong>Ø³Ø§Ø®ØªØ§Ø±:</strong> {{ structure.rows }} Ø³Ø·Ø± Ã— {{ structure.columns|length }} Ø³ØªÙˆÙ†
                </div>
                <div class="col-md-4">
                    <a href="/form/list" class="btn btn-secondary">â† Ø¨Ø§Ø²Ú¯Ø´Øª Ø¨Ù‡ Ù„ÛŒØ³Øª</a>
                </div>
            </div>
        </div>
    </div>

    {% if responses %} {% for response in responses %}
    <div class="card mb-4">
        <div class="card-header bg-light">
            <div class="d-flex justify-content-between align-items-center">
                <h5 class="mb-0">Ù¾Ø§Ø³Ø® {{ loop.index }}</h5>
                <div>
                    <span class="badge bg-primary">Ú©Ø§Ø±Ø¨Ø±: {{ response.user.username }}</span>
                    <span class="badge bg-secondary">{{ response.filled_at.strftime('%Y-%m-%d %H:%M') }}</span>
                </div>
            </div>
        </div>
        <div class="card-body">
            <div class="table-responsive">
                <table class="table table-bordered table-striped">
                    <thead class="table-dark">
                        <tr>
                            <th width="50">#</th>
                            {% for col in structure.columns %}
                            <th>
                                {{ col.name }}
                                <br>
                                <!--Ù†Ø´Ø§Ù† Ø¯Ø§Ø¯Ù† Ù†ÙˆØ¹ Ø¯Ø§Ø¯Ù‡-->
                                <!--<small class="text-light">{{ col.type }}</small>-->
                            </th>
                            {% endfor %}
                        </tr>
                    </thead>
                    <tbody>
                        {% for row_index in range(structure.rows) %}
                        <tr>
                            <td class="fw-bold text-center">{{ row_index + 1 }}</td>
                            {% for col_index in range(structure.columns|length) %}
                            <td>
                                {% set cell_key = 'cell_' ~ row_index ~ '_' ~ col_index %} {% set cell_value = response.data[cell_key] %} {% if cell_value %} {% if structure.columns[col_index].type == 'checkbox' %} {% if cell_value == 'true' %}
                                <span class="badge bg-success">âœ“ {{ structure.columns[col_index].checkbox_label }}</span> {% else %}
                                <span class="badge bg-secondary">âœ— {{ structure.columns[col_index].checkbox_label }}</span> {% endif %} {% else %} {{ cell_value }} {% endif %} {% else %}
                                <span class="text-muted">-</span> {% endif %}
                            </td>
                            {% endfor %}
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>
    </div>
    {% endfor %} {% else %}
    <div class="alert alert-info text-center py-5">
        <div class="mb-3">
            <i class="fas fa-inbox fa-3x text-muted"></i>
        </div>
        <h4>Ù‡Ù†ÙˆØ² Ù¾Ø§Ø³Ø®ÛŒ Ø«Ø¨Øª Ù†Ø´Ø¯Ù‡</h4>
        <p class="text-muted">Ù‡ÛŒÚ† Ú©Ø§Ø±Ø¨Ø±ÛŒ ØªØ§Ú©Ù†ÙˆÙ† Ø§ÛŒÙ† ÙØ±Ù… Ø±Ø§ Ù¾Ø± Ù†Ú©Ø±Ø¯Ù‡ Ø§Ø³Øª.</p>
        <a href="/form/list" class="btn btn-primary mt-3">Ø¨Ø§Ø²Ú¯Ø´Øª Ø¨Ù‡ Ù„ÛŒØ³Øª ÙØ±Ù…â€ŒÙ‡Ø§</a>
    </div>
    {% endif %}
</div>

<style>
    .table th {
        vertical-align: middle;
        text-align: center;
    }
    
    .table td {
        vertical-align: middle;
    }
    
    .badge {
        font-size: 0.75em;
    }
</style>
{% endblock %}