{% extends "base.html" %} {% block content %}
<div class="container">
    <h2>ğŸ“‹ ØªÙ…Ø§Ù… ÙØ±Ù…â€ŒÙ‡Ø§ÛŒ Ù¾Ø± Ø´Ø¯Ù‡</h2>

    <!-- Ø§Ø·Ù„Ø§Ø¹Ø§Øª ØµÙØ­Ù‡â€ŒØ¨Ù†Ø¯ÛŒ -->
    <div class="alert alert-info d-flex justify-content-between align-items-center">
        <div>
            Ù†Ù…Ø§ÛŒØ´ <strong>{{ (page - 1) * per_page + 1 }}</strong> ØªØ§
            <strong>{{ [page * per_page, total_responses] | min }}</strong> Ø§Ø²
            <strong>{{ total_responses }}</strong> Ù¾Ø§Ø³Ø®
        </div>
        <div>
            ØµÙØ­Ù‡ <strong>{{ page }}</strong> Ø§Ø² <strong>{{ total_pages }}</strong>
        </div>
    </div>

    <div class="card">
        <div class="card-body">
            {% if responses %}
            <div class="table-responsive">
                <table class="table table-striped table-hover">
                    <thead class="table-dark">
                        <tr>
                            <th>#</th>
                            <th>Ù†Ø§Ù… ÙØ±Ù…</th>
                            <th>Ú©Ø§Ø±Ø¨Ø± Ù¾Ø±Ú©Ù†Ù†Ø¯Ù‡</th>
                            <th>ØªØ§Ø±ÛŒØ® Ù¾Ø± Ø´Ø¯Ù†</th>
                            <th>Ø¹Ù…Ù„ÛŒØ§Øª</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for response in responses %}
                        <tr>
                            <td>{{ (page - 1) * per_page + loop.index }}</td>
                            <td>
                                <strong>{{ response.form.title }}</strong>
                                <br>
                                <small class="text-muted">Ø³Ø§Ø²Ù†Ø¯Ù‡: {{ response.form.creator.username }}</small>
                            </td>
                            <td>
                                {{ response.user.username }} {% if response.user.email %}
                                <br>
                                <small class="text-muted">{{ response.user.email }}</small> {% endif %}
                            </td>
                            <td>
                                {{ response.filled_at.strftime('%Y-%m-%d') }}
                                <br>
                                <small class="text-muted">{{ response.filled_at.strftime('%H:%M') }}</small>
                            </td>
                            <td>
                                <a href="/form/responses/{{ response.form.id }}?response_id={{ response.id }}" class="btn btn-sm btn-info">
                                   ğŸ‘ï¸ Ù…Ø´Ø§Ù‡Ø¯Ù‡
                                </a>
                            </td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>

            <!-- ØµÙØ­Ù‡â€ŒØ¨Ù†Ø¯ÛŒ -->
            {% if total_pages > 1 %}
            <nav aria-label="Page navigation">
                <ul class="pagination justify-content-center">
                    <!-- Ø¯Ú©Ù…Ù‡ Ù‚Ø¨Ù„ÛŒ -->
                    <li class="page-item {% if page == 1 %}disabled{% endif %}">
                        <a class="page-link" href="?page={{ page - 1 }}">&laquo; Ù‚Ø¨Ù„ÛŒ</a>
                    </li>

                    <!-- ØµÙØ­Ø§Øª -->
		{% for p in range(1, total_pages + 1) %}
			{% if p >= page - 2 and p<=page + 2 %}
			<li class="page-item {% if p == page %}active{% endif %}">
                        	<a class="page-link" href="?page={{ p }}">{{ p }}</a>
                        </li>
                        {% endif %}
		{% endfor %}

                        <!-- Ø¯Ú©Ù…Ù‡ Ø¨Ø¹Ø¯ÛŒ -->
                        <li class="page-item {% if page == total_pages %}disabled{% endif %}">
                            <a class="page-link" href="?page={{ page + 1 }}">Ø¨Ø¹Ø¯ÛŒ &raquo;</a>
                        </li>
                </ul>
            </nav>
            {% endif %} {% else %}
            <div class="text-center py-5">
                <div class="mb-3">
                    <i class="fas fa-file-alt fa-3x text-muted"></i>
                </div>
                <h4>Ù‡Ù†ÙˆØ² ÙØ±Ù…â€ŒØ§ÛŒ Ù¾Ø± Ù†Ø´Ø¯Ù‡</h4>
                <p class="text-muted">Ù‡ÛŒÚ† ÙØ±Ù… Ù¾Ø± Ø´Ø¯Ù‡â€ŒØ§ÛŒ ÙˆØ¬ÙˆØ¯ Ù†Ø¯Ø§Ø±Ø¯.</p>
                <a href="/form/list" class="btn btn-primary">Ù…Ø´Ø§Ù‡Ø¯Ù‡ ÙØ±Ù…â€ŒÙ‡Ø§</a>
            </div>
            {% endif %}
        </div>
    </div>
</div>

<style>
    .pagination .page-item.active .page-link {
        background-color: #007bff;
        border-color: #007bff;
    }
    
    .pagination .page-link {
        color: #007bff;
    }
    
    .pagination .page-link:hover {
        color: #0056b3;
    }
</style>
{% endblock %}